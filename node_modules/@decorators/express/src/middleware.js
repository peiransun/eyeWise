"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const di_1 = require("@decorators/di");
/**
 * Create request middleware handler that uses class or function provided as middleware
 *
 * @export
 * @param {Middleware} middleware
 *
 * @returns {RequestHandler}
 */
function middlewareHandler(middleware) {
    return function (...args) {
        let instance;
        try {
            instance = di_1.Container.get(middleware);
        }
        catch (_a) {
            instance = new middleware();
        }
        return instance.use.apply(instance, args);
    };
}
exports.middlewareHandler = middlewareHandler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlkZGxld2FyZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx1Q0FBMkM7QUEwQjNDOzs7Ozs7O0dBT0c7QUFDSCwyQkFBa0MsVUFBZ0I7SUFDaEQsTUFBTSxDQUFDLFVBQVMsR0FBRyxJQUFXO1FBQzVCLElBQUksUUFBb0IsQ0FBQztRQUV6QixJQUFJLENBQUM7WUFDSCxRQUFRLEdBQUcsY0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxDQUFDO1FBQUMsS0FBSyxDQUFDLENBQUMsSUFBRCxDQUFDO1lBQ1AsUUFBUSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7UUFDOUIsQ0FBQztRQUVELE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDNUMsQ0FBQyxDQUFBO0FBQ0gsQ0FBQztBQVpELDhDQVlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UsIE5leHRGdW5jdGlvbiwgUmVxdWVzdEhhbmRsZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJ0BkZWNvcmF0b3JzL2RpJztcblxuZXhwb3J0IGludGVyZmFjZSBUeXBlIGV4dGVuZHMgRnVuY3Rpb24ge1xuICBuZXcgKC4uLmFyZ3M6IGFueVtdKTtcbn1cblxuLyoqXG4gKiBNaWRkbGV3YXJlIGNsYXNzIGludGVyZmFjZVxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTWlkZGxld2FyZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1pZGRsZXdhcmUge1xuICB1c2UocmVxdWVzdDogUmVxdWVzdCwgcmVzcG9uc2U6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pOiB2b2lkO1xufVxuXG4vKipcbiAqIEVycm9yIG1pZGRsZXdhcmUgaW50ZXJmYWNlXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBFcnJvck1pZGRsZXdhcmVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFcnJvck1pZGRsZXdhcmUge1xuICB1c2UoZXJyb3I6IGFueSwgcmVxdWVzdDogUmVxdWVzdCwgcmVzcG9uc2U6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pOiB2b2lkO1xufVxuXG4vKipcbiAqIENyZWF0ZSByZXF1ZXN0IG1pZGRsZXdhcmUgaGFuZGxlciB0aGF0IHVzZXMgY2xhc3Mgb3IgZnVuY3Rpb24gcHJvdmlkZWQgYXMgbWlkZGxld2FyZVxuICpcbiAqIEBleHBvcnRcbiAqIEBwYXJhbSB7TWlkZGxld2FyZX0gbWlkZGxld2FyZVxuICpcbiAqIEByZXR1cm5zIHtSZXF1ZXN0SGFuZGxlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1pZGRsZXdhcmVIYW5kbGVyKG1pZGRsZXdhcmU6IFR5cGUpOiBSZXF1ZXN0SGFuZGxlciB7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gICAgbGV0IGluc3RhbmNlOiBNaWRkbGV3YXJlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGluc3RhbmNlID0gQ29udGFpbmVyLmdldChtaWRkbGV3YXJlKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGluc3RhbmNlID0gbmV3IG1pZGRsZXdhcmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zdGFuY2UudXNlLmFwcGx5KGluc3RhbmNlLCBhcmdzKTtcbiAgfVxufVxuIl19